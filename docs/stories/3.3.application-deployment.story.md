# Story 3.3: Application Deployment

## Status
Draft

## Story
**As a** developer,
**I want** to deploy the entire full-stack application to a public URL,
**so that** potential employers can easily access and evaluate the live demo.

## Acceptance Criteria
1. The frontend application is successfully deployed to a public hosting service (e.g., Vercel, Netlify).
2. The backend application is successfully deployed to a public hosting service (e.g., Heroku, Google Cloud Run).
3. The deployed frontend is correctly configured to communicate with the deployed backend (CORS, API URLs).
4. All necessary environment variables and secrets (including Google OAuth credentials and Secret Manager access) are securely configured in the production environments.
5. The complete, end-to-end user workflow (Login -> View Calendar -> Chat -> Get AI Response) is fully functional on the public URL.

## Tasks / Subtasks

### Frontend Deployment
- [ ] Prepare frontend for production (AC: 1)
  - [ ] Configure production build settings and environment variables
  - [ ] Optimize build for deployment (bundle size, caching)
  - [ ] Set up custom domain and SSL configuration
  - [ ] Configure deployment service (Vercel/Netlify)
- [ ] Deploy frontend application (AC: 1)
  - [ ] Set up CI/CD pipeline for automatic deployments
  - [ ] Configure build command and output directory
  - [ ] Test deployed frontend accessibility and performance
  - [ ] Monitor deployment logs and error handling

### Backend Deployment
- [ ] Prepare backend for production (AC: 2)
  - [ ] Configure production settings and environment variables
  - [ ] Set up database and Secret Manager access in production
  - [ ] Configure CORS and security headers for production
  - [ ] Choose and configure deployment service (Heroku/Cloud Run)
- [ ] Deploy backend application (AC: 2)
  - [ ] Containerize backend application with Docker
  - [ ] Set up CI/CD pipeline for automatic deployments
  - [ ] Configure health checks and monitoring
  - [ ] Test deployed backend API endpoints

### Production Configuration
- [ ] Configure cross-service communication (AC: 3)
  - [ ] Update frontend API URLs to point to deployed backend
  - [ ] Configure CORS settings for production domains
  - [ ] Set up proper authentication cookie handling
  - [ ] Test API communication between deployed services
- [ ] Set up production monitoring (AC: 3)
  - [ ] Configure logging and error tracking
  - [ ] Set up performance monitoring and alerts
  - [ ] Monitor API usage and rate limits
  - [ ] Set up uptime monitoring and notifications

### Security and Secrets Management
- [ ] Configure production secrets (AC: 4)
  - [ ] Set up Google OAuth credentials in production
  - [ ] Configure Google Cloud Secret Manager access
  - [ ] Set up Google Gemini API keys in production
  - [ ] Configure environment-specific secret management
- [ ] Implement production security measures (AC: 4)
  - [ ] Set up HTTPS and SSL certificates
  - [ ] Configure security headers and CSP policies
  - [ ] Implement rate limiting and DDoS protection
  - [ ] Set up proper authentication and authorization

### End-to-End Testing
- [ ] Test complete user workflow (AC: 5)
  - [ ] Test OAuth login flow on deployed application
  - [ ] Test calendar data fetching and display
  - [ ] Test chat functionality with streaming responses
  - [ ] Test AI agent responses with calendar context
- [ ] Validate production readiness (AC: 5)
  - [ ] Test application performance and load handling
  - [ ] Verify error handling and user feedback
  - [ ] Test mobile responsiveness across devices
  - [ ] Conduct security testing and vulnerability assessment

## Dev Notes

### Previous Story Insights
This story depends on all previous stories being complete:
- Story 3.2 (Frontend Chat Response Handling) provides the complete chat interface
- Story 3.1 (Backend LLM Integration) provides the AI agent functionality
- Story 2.3 (Frontend Calendar Display) provides the calendar view
- Story 1.2 (Backend Google OAuth 2.0 Flow) provides authentication
[Source: All previous stories in the epic]

### Deployment Architecture
Production deployment architecture [Source: architecture/deployment-architecture.md]:
```
Frontend (Vercel/Netlify) → Backend (Heroku/Cloud Run) → Google APIs
       ↓                        ↓                        ↓
   Static Files           API Server               Google Services
   (React/TS)             (FastAPI)                (OAuth, Calendar, Gemini)
```

### Environment Configuration
Production environment variables [Source: architecture/deployment-configuration.md]:
```bash
# Frontend Environment Variables
VITE_API_URL=https://api.example.com
VITE_GOOGLE_CLIENT_ID=production-client-id
VITE_APP_URL=https://app.example.com

# Backend Environment Variables
GOOGLE_CLIENT_ID=production-client-id
GOOGLE_CLIENT_SECRET=production-client-secret
GOOGLE_PROJECT_ID=production-project-id
GEMINI_API_KEY=production-gemini-key
SECRET_MANAGER_PROJECT_ID=production-project-id
FRONTEND_URL=https://app.example.com
```

### Technical Specifications
Deployment services and configurations [Source: architecture/deployment-specifications.md]:
- **Frontend**: Vercel or Netlify with custom domain
- **Backend**: Heroku or Google Cloud Run with containerization
- **Database**: Google Cloud Secret Manager for secrets storage
- **Monitoring**: Application performance monitoring and error tracking
- **CI/CD**: GitHub Actions for automated testing and deployment
- **SSL**: Automatic HTTPS certificate management
- **CORS**: Production domain whitelisting and security headers

### File Locations
Based on unified project structure [Source: architecture/unified-project-structure.md]:
- Frontend deployment config: `apps/web/vercel.json` or `apps/web/netlify.toml` (new)
- Backend Dockerfile: `apps/api/Dockerfile` (new)
- Backend deployment config: `apps/api/heroku.yml` or `apps/api/cloudbuild.yaml` (new)
- CI/CD workflows: `.github/workflows/deploy.yml` (new)
- Environment examples: `apps/web/.env.production.example` (new)
- Production secrets: `apps/api/.env.production.example` (new)
- Deployment documentation: `docs/deployment/README.md` (new)
- Monitoring config: `docs/deployment/monitoring.md` (new)

### Testing Requirements
Based on testing strategy [Source: architecture/testing-strategy.md]:
- End-to-End Tests: `apps/e2e/` (Playwright or Cypress)
- Required tests:
  - Deployed application smoke tests
  - OAuth login flow tests in production
  - API endpoint integration tests
  - Performance and load testing
  - Security and penetration testing
  - Cross-browser compatibility tests
  - Mobile responsiveness tests

### Technical Constraints
- Must use production-ready deployment services [Source: architecture/tech-stack.md]
- Must implement proper HTTPS and security measures [Source: security requirements]
- Must use environment-specific configuration management [Source: architecture/coding-standards.md#Configuration]
- Must implement proper monitoring and error tracking [Source: architecture/deployment-architecture.md#Monitoring]
- Must handle production-scale authentication and API rate limits [Source: architecture/backend-architecture.md#Production-Scale]
- Must ensure GDPR and data privacy compliance [Source: architecture/security-requirements.md#Compliance]
- Must implement proper backup and disaster recovery [Source: architecture/deployment-architecture.md#Disaster-Recovery]
- Must conduct proper security hardening [Source: architecture/security-requirements.md#Hardening]

## Testing
- End-to-end test location: `apps/e2e/`
- Test standards: Follow testing patterns with Playwright or Cypress
- Specific requirements:
  - Test complete user workflow on deployed application
  - Test OAuth login flow with production credentials
  - Test calendar data fetching and display
  - Test chat functionality with streaming AI responses
  - Test application performance under load
  - Test security measures and vulnerability assessment
  - Test mobile responsiveness across devices
  - Test error handling and user feedback mechanisms

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-09-02 | 1.0 | Initial story draft | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used

### Debug Log References

### Completion Notes List

### File List

## QA Results