# Story 1.3: Frontend Login Interface

## Status
Draft

## Story
**As a** user,
**I want** to see a clean login page with a "Login with Google" button,
**so that** I can easily and securely initiate the authentication process.

## Acceptance Criteria
1. A login page is created in the React application that serves as the entry point for unauthenticated users.
2. The page displays a prominent "Login with Google" button, styled using the Material-UI component library.
3. Clicking the button directs the user to the backend's OAuth initiation endpoint.
4. After a successful login and redirection from the backend, the user is navigated to a simple, placeholder "main application" page.

## Tasks / Subtasks
- [ ] Create login page component (AC: 1)
  - [ ] Implement `LoginPage` component in `apps/web/src/pages/LoginPage.tsx`
  - [ ] Set up login page as entry point for unauthenticated users
  - [ ] Configure routing for `/login` path
- [ ] Implement AuthComponent with Google login button (AC: 2)
  - [ ] Create `AuthComponent` in `apps/web/src/components/AuthComponent.tsx`
  - [ ] Style "Login with Google" button using Material-UI
  - [ ] Handle authentication state display (login/logout button)
- [ ] Connect login button to backend OAuth flow (AC: 3)
  - [ ] Implement click handler to redirect to `/auth/google` endpoint
  - [ ] Set up API client with proper base URL and credentials
  - [ ] Handle navigation to OAuth initiation
- [ ] Create main application placeholder page (AC: 4)
  - [ ] Implement `MainAppPage` component in `apps/web/src/pages/MainAppPage.tsx`
  - [ ] Set up basic two-column layout structure
  - [ ] Configure routing for protected `/` path
- [ ] Implement authentication state management (AC: 4)
  - [ ] Set up React Context for authentication state
  - [ ] Create `useAuth` hook for state management
  - [ ] Implement protected route component
  - [ ] Handle authentication state updates after OAuth callback

## Dev Notes

### Previous Story Insights
Story 1.1 (Project Initialization & Monorepo Setup) and Story 1.2 (Backend Google OAuth 2.0 Flow) must be completed first as they establish the frontend foundation and backend authentication endpoints. [Source: docs/stories/1.1.project-initialization-monorepo-setup.story.md, docs/stories/1.2.backend-google-oauth-flow.story.md]

### Data Models
User model from shared types [Source: architecture/data-models.md#User]:
```typescript
interface User {
  id: string;        // The user's unique Google ID
  email: string;     // The user's email address
  name: string;      // The user's full name
  picture: string;   // URL to the user's profile picture
}
```

App state structure [Source: architecture/frontend-architecture.md#State-Structure]:
```typescript
interface AppState {
  isAuthenticated: boolean;
  user: User | null;
  calendarEvents: CalendarEvent[];
  chatMessages: ChatMessage[];
}
```

### API Specifications
Backend auth endpoints [Source: docs/stories/1.2.backend-google-oauth-flow.story.md]:
- `GET /auth/google` - Initiates OAuth flow
- `GET /auth/google/callback` - Handles OAuth callback

Frontend API client setup [Source: architecture/frontend-architecture.md#API-Client-Setup]:
```typescript
const apiClient = axios.create({
  baseURL: '/api',
  withCredentials: true, // to send cookies
});
```

### Component Specifications
Frontend: AuthComponent [Source: architecture/components.md#Frontend-AuthComponent]:
- **Responsibility**: Renders a "Login with Google" button or "Logout" button depending on auth state
- **Dependencies**: Backend: AuthService
- **Technology Stack**: React, Material-UI

Protected Route Pattern [Source: architecture/frontend-architecture.md#Protected-Route-Pattern]:
- Route organization: `/login` (unauthenticated), `/` (authenticated)
- ProtectedRoute component redirects unauthenticated users to `/login`

### File Locations
Based on unified project structure [Source: architecture/unified-project-structure.md]:
- Login page: `apps/web/src/pages/LoginPage.tsx`
- Main app page: `apps/web/src/pages/MainAppPage.tsx`
- Auth component: `apps/web/src/components/AuthComponent.tsx`
- Auth context: `apps/web/src/contexts/AuthContext.tsx`
- Auth hook: `apps/web/src/hooks/useAuth.ts`
- Protected route: `apps/web/src/components/ProtectedRoute.tsx`
- API client: `apps/web/src/services/apiClient.ts`
- Shared types: `packages/shared/src/auth.ts`

### Testing Requirements
Based on testing strategy [Source: architecture/testing-strategy.md#Frontend-Tests]:
- Test file location: `apps/web/src/__tests__/`
- Test frameworks: Jest & React Testing Library
- Required tests:
  - LoginComponent rendering tests
  - Authentication state management tests
  - Protected route behavior tests
  - Navigation flow tests

### Technical Constraints
- Must use React 18.x with TypeScript [Source: architecture/tech-stack.md]
- Must use Material-UI 5.x for components [Source: architecture/tech-stack.md]
- Must use React Context for state management [Source: architecture/frontend-architecture.md#State-Management-Patterns]
- Must use React Router for navigation [Source: architecture/frontend-architecture.md#Routing-Architecture]
- Must use axios for API calls with credentials [Source: architecture/frontend-architecture.md#API-Client-Setup]
- Component naming must follow PascalCase convention [Source: architecture/coding-standards.md#Naming-Conventions]

## Testing
- Test file location: `apps/web/src/__tests__/`
- Test standards: Follow frontend testing patterns with Jest & React Testing Library
- Testing frameworks: Jest & React Testing Library
- Specific requirements:
  - Component rendering and interaction tests
  - Authentication state flow tests
  - Protected route navigation tests
  - API client configuration tests

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-09-02 | 1.0 | Initial story draft | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used

### Debug Log References

### Completion Notes List

### File List

## QA Results